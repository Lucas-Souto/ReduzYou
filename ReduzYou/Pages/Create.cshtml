@page "/create/{post?}"
@model ReduzYou.Pages.CreateModel
@{
    ViewData["Title"] = "- Criar";
    string username = HttpContext.Session.GetString("_Username");
    bool logged = !string.IsNullOrEmpty(HttpContext.Session.GetString("_Id")) && !string.IsNullOrEmpty(username);
    ReduzYou.Data.Post post = null;

    if (!logged) Response.Redirect("/");
    else
    {
        if (Model.PostLink.Length == 0) post = DataBase.FindDraft(username);
        else post = DataBase.GetPostEdit(username, Model.PostLink);

        if (post == null) post = new ReduzYou.Data.Post();
    }
}

@section styles
{
    <link rel="stylesheet" href="/css/create.css" />
}

@(await Html.RenderComponentAsync<ReduzYou.Pages.Components.Header>(RenderMode.Static, new { Logged = logged }))

<div id="image-selector">
    <form id="add-images" method="post" enctype="multipart/form-data">
        <input id="image-upload" name="imageUpload" type="file" accept="image/png, image/jpeg" />
    </form>
</div>

@section scripts
{
    <script type="text/javascript" src="/js/create/image_selector.js" defer></script>
}